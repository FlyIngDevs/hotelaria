<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <title>Hospeda</title>
</head>
<body class="imagen">
    <nav class="navbar navbar-expand-lg navbar-light cabecalho">
        <a class="navbar-brand" href="#">Hospeda</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#conteudoNavbarSuportado" aria-controls="conteudoNavbarSuportado" aria-expanded="false" aria-label="Alterna navegação">
          <span class="navbar-toggler-icon"></span>
        </button>
      
        <div class="collapse navbar-collapse" id="conteudoNavbarSuportado">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="#">Home <span class="sr-only">(página atual)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Dropdown
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="#">Ação</a>
                <a class="dropdown-item" href="#">Outra ação</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">Algo mais aqui</a>
              </div>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" href="#">Desativado</a>
            </li>            
          </ul>
                    <!-- Adicione o elemento para o relógio -->
          <div class="relogio" style="text-align: center; margin-top: 20px;">  
            <div id="clock" style="font-size: 24px;"></div>
          </div>

          <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="search" placeholder="Pesquisar" aria-label="Pesquisar">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Pesquisar</button>
          </form>
        </div>
      </nav>
     
   <div class="mod">
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="@mdo">Cadastrar Hóspede</button>
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal1" data-whatever="@fat">Cadastrar Quarto</button>
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal2" data-whatever="@getbootstrap">Checkout</button>

    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Novo Hóspede</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
            <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
          <form id="cadastroForm" action="/cadastro" method="POST" onsubmit="return cadastrarUsuario(event)">
            <label for="nome" class="col-form-label">Nome:</label>
            <input type="text" name="nome" class="form-control" required><br>
    
            <label for="cpf">CPF:</label>
            <input type="text" name="cpf" class="form-control" required><br>
    
            <label for="email">Email:</label>
            <input type="email" name="email" class="form-control" required><br>
    
            <label for="fone">Telefone:</label>
            <input type="text" name="fone" class="form-control" value="(00)00000000" required><br>
    
            <label for="endereco">Endereço:</label>
            <input type="text" name="endereco" class="form-control" required><br>
    
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>          
              <input type="submit" value="Cadastrar" class="btn btn-primary">
              </div>
        </form>                      
        </div>       
        </div>
    </div>
    </div>
    <div class="modal fade" id="exampleModal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Quartos</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
                        <span aria-hidden="true">&times;</span>
                        </button>
                    </div> 
                    <div class="modal-body">
                      <form id="cadastroForm1" action="/cadastrar-quarto" method="POST" onsubmit="return cadastrarQuarto(event)">
                        <label for="numero_quarto" class="col-form-label">Quartos nº</label>
                        <input type="text" name="numero_quarto" class="form-control" required><br>
                
                        <label for="cpf">CPF:</label>
                        <input type="text" name="cpf" class="form-control" required><br>

                        <div class="form-group">
                          <label for="anotacoes" class="col-form-label">Anotações</label>
                          <textarea class="form-control" name="anotacoes" id="message-text"></textarea>
                      </div>             
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>          
                          <input type="submit" value="Cadastrar" class="btn btn-primary">
                          </div> 
                        </form>               
         
                </div>
            </div>
    </div>   
  </div>
         <div class="modal fade" id="exampleModal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Checkout</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="excluirForm" action="/excluir-cliente" method="POST" onsubmit="return checkoutCliente(event)">
                      <label for="cpf">CPF:</label>
                        <input type="text" name="cpf" class="form-control" required><br>

                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>          
                        <input type="submit" value="Checkout" class="btn btn-primary">
                      </div>
                    </form>
                </div>
                
                </div>
            </div>
        </div>
</div>
<!-- Adicione o elemento para a mensagem de sucesso -->
<div id="mensagemSucesso" style="text-align: center; margin-top: 20px; color: green;"></div>

<div class="lista">    
  <table class="tablel">                
    <tr>                 
      <th>Nome</th>
      <th>Quarto</th>
      <th>Telefone</th>                                                           
    </tr>                
  </table>
  
  <div class="table-overflow">              
      <table class="table"> 
        <tbody>
        {% for dados in cliente %}     
        <tr>     
            <td>{{ dados.nome }}</td>            
            <td>{{ dados.numero_quarto }}</td>
            <td>{{ dados.fone }}</td>    
        </tr>
        {% endfor %}   
        </tbody>
      </table>            
  </div>  
</div>

<div class="logos">
    <img src="../static/img/logo_hotel.png" alt="some text" class="img-fluid">
</div>

<style>
    .cabecalho{
        background-color:#007bff !important; 
    }
    .imagen {        
        background-image: url(../static/img/foto.avif);    
        background-repeat: no-repeat;         
        background-size: cover;
        background-position: center;
        height: 453px;
    }
    .mod{
        margin-top: 38px;
        margin-left: 4%;
    }
    .lista{
        margin-top: -38px;
        margin-left: 43%;
        margin-right: 3%;
    }
    .table-overflow {
        max-height: 215px;
        overflow-x: auto;
    }
    .tablel{
        width: 100%;
        margin-bottom: 1rem;
        background-color: #007bff;
        height: 44px;
    }
    .logos img {
        height: 364px;
        margin-top: -127px;
        padding: 70px;
    }
    th {
        text-align: center;
    }
</style>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

<!-- Adicione o script para atualizar o relógio -->
<script>
function updateClock() {
    var now = new Date();
    var hours = now.getHours();
    var minutes = now.getMinutes();
    var seconds = now.getSeconds();
    var timeString = hours.toString().padStart(2, '0') + ':' +
                     minutes.toString().padStart(2, '0') + ':' +
                     seconds.toString().padStart(2, '0');
    document.getElementById('clock').textContent = timeString;
}

setInterval(updateClock, 1000);
updateClock(); // Chama a função imediatamente para exibir o relógio sem atraso
</script>

<!-- Adicione o script para exibir a mensagem de sucesso -->
<script>
function cadastrarUsuario(event) {
    event.preventDefault();
    var form = document.getElementById('cadastroForm');
    var formData = new FormData(form);

    fetch('/cadastro', {
        method: 'POST',
        body: formData
    }).then(response => response.text())
      .then(data => {
          document.getElementById('mensagemSucesso').textContent = 'Cadastro de usuário com sucesso!';
          form.reset();
          $('#exampleModal').modal('hide');
      }).catch(error => console.error('Erro:', error));
}

function cadastrarQuarto(event) {
    event.preventDefault();
    var form = document.getElementById('cadastroForm1');
    var formData = new FormData(form);

    fetch('/cadastrar-quarto', {
        method: 'POST',
        body: formData
    }).then(response => response.text())
      .then(data => {
          document.getElementById('mensagemSucesso').textContent = 'Cadastro de quarto com sucesso!';
          form.reset();
          $('#exampleModal1').modal('hide');
      }).catch(error => console.error('Erro:', error));
}

function checkoutCliente(event) {
    event.preventDefault();
    var form = document.getElementById('excluirForm');
    var formData = new FormData(form);

    fetch('/excluir-cliente', {
        method: 'POST',
        body: formData
    }).then(response => response.text())
      .then(data => {
          document.getElementById('mensagemSucesso').textContent = 'Checkout realizado com sucesso!';
          form.reset();
          $('#exampleModal2').modal('hide');
      }).catch(error => console.error('Erro:', error));
}
</script>
</body>
</html>